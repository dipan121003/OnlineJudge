{% extends 'home/base.html' %}
{% load static %}
{% block title %}Problems â€“ Kamand Prompt{% endblock %}
{% block extra_head %}
    <style>
        body {
            background-image: url("{% static 'images/problems_background.png' %}");
            background-size: cover;
            background-attachment: fixed;
            background-color: #0a192f; /* Dark blue fallback color */
        }

        .list-group-item {
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #f0f0f0;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .list-group-item:hover {
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            box-shadow: 0 0 25px rgba(0, 255, 255, 0.4);
            transform: translateY(-2px);
        }

        .page-title {
            color: white;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        }

        .search-container {
            max-width: 700px; /* Controls the width of the search bar */
            margin: 0 auto 2rem auto; /* Centers the search bar and adds space below */
        }

        .search-input {
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1.1rem; /* Makes text thicker */
            padding: 0.75rem 1.25rem; /* Makes the bar broader/taller */
        }

        .search-input:focus {
            background-color: rgba(255, 255, 255, 0.2);
            border-color: #4dd0e1;
            box-shadow: 0 0 0 0.25rem rgba(77, 208, 225, 0.25);
            color: white;
        }

        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
  </style>
{% endblock %}

{% block content %}
    <div class="container">
    <h1 class="text-center page-title mb-4">All Problems</h1>

    <div class="search-container">
      <form method="get" action="{% url 'problems-list' %}">
        <div class="input-group">
          <input type="text" name="q" class="form-control search-input" placeholder="Search for a problem..."
            value="{{ search_query }}">
          <button class="btn btn-primary" type="submit">Search</button>
        </div>
      </form>
    </div>

    {% if active_contests or upcoming_contests %}
    <div class="card mb-4">
        <div class="card-body">
            <h5 class="card-title" style="color: #4dd0e1;">Featured Contests</h5>
            {% for contest in active_contests %}
                <div class="alert alert-success">
                    <strong>Live Now!</strong>
                    <a href="{% url 'contest_detail' contest.id %}" class="alert-link">{{ contest.title }}</a>
                    - Ends {{ contest.end_time|date:"F d, P" }}
                </div>
            {% endfor %}
            {% for contest in upcoming_contests %}
                <div class="alert alert-info">
                    <strong>Upcoming:</strong>
                    <a href="{% url 'contest_detail' contest.id %}" class="alert-link">{{ contest.title }}</a>
                    - Starts(UTC) {{ contest.start_time|date:"F d, P" }}
                </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <div class="list-group">
      {% for problem in problems %}
      <a href="{% url 'problem-detail' problem.pk %}"
        class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
        <span class="fw-bold">{{ problem.title }}</span>
        <span class="badge 
                    {% if problem.difficulty == 'Easy' %}bg-success
                    {% elif problem.difficulty == 'Medium' %}bg-warning text-dark
                    {% else %}bg-danger{% endif %}">
          {{ problem.difficulty }}
        </span>
      </a>
      {% empty %}
      <div class="list-group-item">
        <div class="alert alert-info text-center m-0">
          No problems available. Please add some.
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
{% endblock %}