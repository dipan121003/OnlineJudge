<!DOCTYPE html>
<html lang="en">
{% load static %}
{% load contest_extras %} <head>
    <meta charset="UTF-8">
    <title>Manage {{ contest.title }}</title>
    <link rel="icon" type="image/png" href="{% static 'images/favicon.png' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    </head>
<body class="bg-light">
    <div class="container py-5">
        <h1>Manage Contest: {{ contest.title }}</h1>
        <p>Add, edit, or remove test cases for each problem in your contest.</p>

        {% for problem in contest.problems.all %}
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">Problem: {{ problem.title }}</h5>
                </div>
                <div class="card-body">
                    <form method="post">
                        {% csrf_token %}
                        <input type="hidden" name="problem_id" value="{{ problem.id }}">

                        {% with formset=problem_formsets|get_item:problem.id %}
                            {{ formset.management_form }}

                            <div class="row fw-bold mb-2 d-none d-md-flex">
                                <div class="col-md-5">Input Data</div>
                                <div class="col-md-5">Output Data</div>
                                <div class="col-md-2">Delete</div>
                            </div>

                            {% for form in formset %}
                                <div class="row align-items-center mb-3">
                                    <div class="col-md-5">
                                        <label class="form-label d-md-none">Input Data</label>
                                        {{ form.input_data }}
                                    </div>
                                    <div class="col-md-5">
                                        <label class="form-label d-md-none">Output Data</label>
                                        {{ form.output_data }}
                                    </div>
                                    <div class="col-md-2 text-center">
                                        {% if form.instance.pk %}{{ form.DELETE }}{% endif %}
                                    </div>
                                </div>
                            {% endfor %}
                        {% endwith %}

                        <button type="submit" class="btn btn-primary btn-sm mt-3">Save Test Cases for: {{ problem.title }}</button>
                    </form>
                </div>
            </div>
        {% endfor %}
        <a href="{% url 'manage_my_contests' %}" class="btn btn-secondary mt-3">Back to My Contests</a>
    </div>
</body>
</html>

    